<#@ template debug="true" hostspecific="True" language="C#" #>
<#@ assembly name="EnvDTE" #>
<#@ output extension=".cs" #>
<#@ Include File="GeradorModeloSPUtilitarios.tt" #>
<#@ import namespace="EnvDTE" #>
//------------------------------------------------------------------------------
// <auto-generated>
// Código Gerado via T4
//
// Não alterar o código - As informações serão perdidadas.
// </auto-generated>
//------------------------------------------------------------------------------
using PortalDeFluxos.Core.BLL.Atributos;
using System;
using System.Collections.Generic;
using Iteris;
using PortalDeFluxos.Core.BLL.Modelo;

<#
	var code = "";
	var serviceProvider = this.Host as IServiceProvider;
    var dte = serviceProvider.GetService(typeof(EnvDTE.DTE)) as EnvDTE.DTE;
	var solutionDirectory = System.IO.Path.GetDirectoryName(dte.Solution.FullName);
	var configuracaoPath = "";
	foreach (Project p in dte.Solution.Projects)
	{
		if(p.Name.Contains("BLL"))
		{	
			solutionDirectory = System.IO.Path.GetDirectoryName(p.FullName);	
			configuracaoPath = solutionDirectory + @"\Modelo\SP\ConfiguracaoModeloListaTT.json";
			var array = p.FullName.Split('\\');
			code = string.Concat(array[array.Length -1].Replace("csproj",""),"Modelo");
		}
	}
    ConfiguraoModeloLista configuracao = ObterConfiguracaoListaSP(configuracaoPath);
#>

namespace <#=code#>
{
	<#
	foreach (ModeloListaSP configuracaoAtual in configuracao.ModelosListaSP)
    {
	#>
	
	[InternalName("<#= configuracaoAtual.NomeLista #>")]
	public class <#= GenerateClassName(configuracaoAtual.NomeLista) #> : <#= configuracaoAtual.ListaProposta ? "EntidadePropostaSP" : "EntidadeSP" #>
	{
<#= ObterCamposModelo(configuracao.UrlSite,configuracaoAtual) #>	}
	<#}#>
	
}